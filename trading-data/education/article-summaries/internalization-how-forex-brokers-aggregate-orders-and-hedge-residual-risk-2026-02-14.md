# Internalization: How Forex Brokers Aggregate Orders and Hedge Residual Risk

**Source**: https://www.babypips.com/learn/forex/internalization-by-forex-brokers
**Date**: 2026-02-14
**Level**: Kindergarten
**Section**: Forex Brokers 101

## Key Concepts

For forex brokers, internalization is an important process that enables them to manage risk and provide competitive pricing to their customers. By understanding how brokers aggregate orders and hedge risk, traders can make informed decisions when choosing a broker and trading strategy. In this lesson, we’ll delve into the concept of internalization, exploring how forex brokers aggregate orders and hedge residual risk. What is internalization? With A-Book (or STP) execution, the broker manages the risk of each trade individually . But what if one trader opens a long GBP/USD position, and another trader opens a short GBP/USD position at or around the same time ? Rather than the A-Book broker having to hedge each trade separately with an LP, why can’t the risk exposure from the two trades “cancel” each other out? Well, they can. Instead of managing risk for every individual trade, a broker can aggregate customer trades that all contain the same currency pair. This process of aggregating trades is known as I nternalization . For example, some customers may buy GBP/USD, while others may sell GBP/USD. Different traders have different opinions so there may be instances where opposing trades can be “matched” or “offset” with each other. When a broker matches one customer’s trade with another customer’s , it removes the market risk in a similar manner to hedging the trade with an external liquidity provider (LP). Because the broker does not send the trades to an LP, it saves money by NOT having to transact with an LP and pay the LP’s spread. A broker can aggregate all long and short GBP/USD positions and offset them against each other . This is why forex brokers want a large customer base. It makes it easier for them to “internalize” risk. The larger their customer base, the more trades that occur, which means the higher the likelihood that trades can be offset with each other. Since it costs money to trade with liquidity providers (due to the spread), this helps the broker save money. For example, the broker can see in its book that it has a total of 10 million units of long GBP/USD and 8 million units of short GBP/USD positions. 10M long - 8M short = net 2M long The difference would leave the broker with a net long 2 million GBP/USD position. This “difference” is also known as the “ residual ” since it’s what remains after all trades are offset. What remains exposes the broker to market risk which is why it’s also called “ residual risk ”. The broker now has to decide how to manage this residual risk. It has two choices: Accept the risk (“Do nothing”) Transfer the risk (“Hedge”) Example: A-Book Execution vs. Internalization (Full Offset) Elsa buys and Ariel sells the same amount of the same currency pair (GBP/USD) at the same time. Under this scenario, the broker prefers to transfer its market risk to its LP. The LP’s prices are marked up by 0.0011 or 1 pip : Let’s see the difference between A-Book execution and Internalization. A-Book Internalization If the broker exercised A-Book execution, it “paid the spread of LP” and the broker’s P&L vs. LP would equal: (1.2007 − 1.2010) x 1,000,000 = -300 USD If the broker took advantage of the fact that the trades happened at the same time and didn’t hedge with an LP, then it wouldn’t have paid that cost. The primary risk for a broker operating the Internalization model occurs when positions are not completely offset, leaving the broker with exposure to price movements which could result in a loss . If a broker has customer orders that can offset each other partially, then the broker is left with a much smaller net position that leaves the broker exposed to market risk. Again, this is known as “ residual risk ”. It can manage this residual risk in two ways: The broker can transfer this risk externally to a liquidity provider by executing a hedge trade. The broker can accept this risk and manage it internally. Example: A-Book Execution vs. Internalization + Hedge Order Let’s see the difference between A-Book execution and Internalization followed by a hedge trade: A-Book Internalization + Hedge Order If the broker exercised A-Book execution then the broker’s realized P&L vs. LP would equal: (1.2008 − 1.2009) x 1,000,000 = -100 USD But the broker didn’t necessarily need to A-book Elsa’s trade because Eric’s trade could’ve offset. So if the broker had “internalized” or aggregated all GBP/USD positions, it wouldn’t need to hedge Elsa’s trade and would’ve saved money by not paying the LP’s spread. Even after internalization, this still leaves the broker with a net short position of 2,000,000 GBP/USD . As you can see, the broker hedged this residual risk with an LP . If there are enough trades of similar size to offset one another, internalization can be very profitable for a broker . That said, if positions remain that can’t be offset, this residual risk exposes the broker to the same market risk as a B-Book trade . A common practice when brokers internalize trades is to: First, offset customer positions against each other , and then… Aggregate the remaining risk exposure and hedge externally with an LP based on a “ volume-weighted average price ” or “ VWAP ”. From the example above, we can see that Elsa’s trade was internally offset by Ariel’s trade. Elsa went long 100,000 GBP/USD , while Ariel went short 100,000 GBP/USD, so the broker’s risk exposure is zero. But then three other traders, Eric, Jasmine, and Louis, went long GBP/USD at different prices. With no other customers going short, the broker wants to hedge this risk. Instead of hedging each trade individually, the broker aggregates the three separate trades and creates just a single hedge trade with an LP based on a VWAP of 1.2511 . Here’s how VWAP is calculated: Trader Volume Price Notional Value Eric 200,000 1.2508 250,160 Jasmine 300,000 1.2510 375,300 Louis 500,000 1.2512 625,600 1,000,000 1,251,060 VWAP = Total Notional Value / Total Volume VWAP = 1,251,060 / 1,000,000 VWAP = 1.2511 Aggregating multiple customer trades is a common practice for brokers since trading with most LPs requires a minimum trade size , usually at least 1 standard lot or increments of 100,000 units . So if a broker’s customers are opening positions smaller than 100,000 units , then the broker has to wait until other customers trade where it can then “ bundle ” the risk from the different trades Another reason that a broker may aggregate orders is that it reduces the time it takes to get all hedged with an LP . For example, if the broker is using STP execution , the execution of many small buy orders one at a time could “ signal ” to an LP that this pattern may continue. If it detects more orders interested in buying than selling, it can “shade” the price and raise the ask (buy) price higher than it normally would. This may result in the broker’s customers getting worse fills than if the broker just sent one, single order to the LP . This is particularly important in illiquid or fast-moving markets. Here’s a summary of how a forex broker benefits depending on its execution method and the outcome of a trade: Customer’s Trade Broker’s Order Execution Benefit WIN B-Book (Accepts risk) Customer’s gain is broker’s loss WIN A-Book (Transfer risk) Broker’s spread – LP’s spread WIN Internalize (Offset risk with another customer) Broker’s spread LOSE B-Book (Accept risk) Customer’s loss is broker’s gain LOSE A-Book (Transfer risk) Broker’s spread – LP’s spread LOSE Internalize (Offset risk with another customer) Broker’s spread
